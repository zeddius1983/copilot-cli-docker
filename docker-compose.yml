version: '3.8'

services:
  copilot-cli:
    build: .
    image: copilot-cli:latest
    container_name: copilot-cli
    stdin_open: true
    tty: true
    environment:
      # Copilot CLI version (e.g., v0.0.410 or "latest")
      - COPILOT_VERSION=latest
      # Optional: GitHub Personal Access Token for authentication
      # - GH_TOKEN=your_token_here
      # Optional: Enable SSH server for remote access
      - ENABLE_SSH=false
      # Optional: Set SSH password (only if ENABLE_SSH=true)
      # - SSH_PASSWORD=yourpassword
    volumes:
      # Persist Copilot CLI configuration
      - copilot-config:/root/.copilot
      # Optional: Mount SSH keys for authentication
      # - ./ssh:/root/.ssh:ro
    ports:
      # Optional: Expose SSH port (only if ENABLE_SSH=true)
      # - "2222:22"
    restart: unless-stopped
    command: /bin/bash

volumes:
  copilot-config:
